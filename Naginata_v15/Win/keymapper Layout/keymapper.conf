# keymapper 薙刀式
#   2025年07月18日 @deepprog [keymapper 薙刀式の設定](https://qiita.com/deepprog/items/4d18a8cc4ab628ee9fb9)
#     / 2025 tor-nky
# ※keymapper の Windows版専用の設定ファイルです

# IMEのキー設定(必須)
# |      * キー     |入力/変換済み文字なし|  他  |
# |-----------------|---------------------|------|
# |Ctrl+Shift+無変換|          -          |全消去|
# |Ctrl+Shift+変換  |          -          |全確定|

# 【資料】
# ----------------------------------------------------------------------
# 薙刀式配列v15（fix版）　　作　大岡俊彦
# 2023年7月28日[【薙刀式】v15fix版、発表](http://oookaworks.seesaa.net/article/500180437.html#gsc.tab=0)
# ----------------------------------------------------------------------
# [keymapper](https://github.com/houmain/keymapper)
#   ポータブル版を使う場合、keymapper.exe と keymapperd.exe を一緒に実行する
# ----------------------------------------------------------------------

@options no-update

@allow-unmapped-commands
@enforce-lowercase-commands
@forward-modifiers Shift Control Alt

[default]
  NagenataMode = Virtual72

# 縦書き用
#   ※縦書き用にする場合は下4行をコメントアウトし、その下の横書き用をコメントにする
  # prev_char = ArrowUp
  # next_char = ArrowDown
  # prev_row  = ArrowRight
  # next_row  = ArrowLeft
# 横書き用
  prev_char   = ArrowLeft
  next_char   = ArrowRight
  prev_row    = ArrowUp
  next_row    = ArrowDown


  ime_cancel = Control{Shift{NonConvert}} # Ctrl+Shift+無変換 → 全消去
  ime_complete = Control{Shift{Convert}}  # Ctrl+Shift+変換 → 全確定
  # ime_on = !NagenataMode NagenataMode Lang1 # かなオン
  # ime_off = !NagenataMode 8ms ime_complete 8ms Lang2 # かなオフ
  ime_on = !NagenataMode NagenataMode KanaMode KanaMode # かなオン
  ime_off = !NagenataMode 8ms ime_complete 8ms KanaMode Backquote # かなオフ

# IME on アプリ定義
[system="Windows" title = "iText"]
  ContextActive >> ime_on

# IME off アプリ定義
[system="Windows" class = "Notepad"]
  ContextActive >> ime_off

# =============================================
# 英数モード
# =============================================
[modifier = "!NagenataMode !Shift !Meta !Control !Alt"]

#　キーボード側のSandSを使う場合は
#　コメントアウトして無効化してください
# SandS
  Space{Any} >> Shift{Any}

# ********** 3キー同時 **********
# 編集モード
  # {Home}
    (D F){Y} >> Home ^
    (F Y)(D) >> Home ^
    (Y D){F} >> Home ^
  # {Enter}{End}
    (D F){H} >> ime_complete End ^
    (F H){D} >> ime_complete End ^
    (H D){F} >> ime_complete End ^
  # {End}
    (D F){N} >> End ^
    (F N){D} >> End ^
    (N D){F} >> End ^

  # +{End}{BS}
    (D F){U} >> Shift{End} Backspace ^
    (F U){D} >> Shift{End} Backspace ^
    (U D){F} >> Shift{End} Backspace ^
  # {↑}
    (D F){J} >> prev_char
    (F J){D} >> prev_char
    (J D){F} >> prev_char
  # {↓}
    (D F){M} >> next_char
    (F M){D} >> next_char
    (M D){F} >> next_char

  # {vk1Csc079}
    (D F){I} >> Meta{Slash} !NagenataMode NagenataMode ^
    (F I){D} >> Meta{Slash} !NagenataMode NagenataMode ^
    (I D){F} >> Meta{Slash} !NagenataMode NagenataMode ^
  # +{↑}
    (D F){K} >> Shift{prev_char}
    (F K){D} >> Shift{prev_char}
    (K D){F} >> Shift{prev_char}
  # +{↓}
    (D F){Comma} >> Shift{next_char}
    (F Comma){D} >> Shift{next_char}
    (Comma D){F} >> Shift{next_char}

  # {Del}
    (D F){O} >> Delete
    (F O){D} >> Delete
    (O D){F} >> Delete
  # +{↑ 7}
    (D F){L} >> Shift{repeat[prev_char, 7]}
    (F L){D} >> Shift{repeat[prev_char, 7]}
    (L D){F} >> Shift{repeat[prev_char, 7]}
  # +{↓ 7}
    (D F){Period} >> Shift{repeat[next_char, 7]}
    (F Period){D} >> Shift{repeat[next_char, 7]}
    (Period D){F} >> Shift{repeat[next_char, 7]}

  # {Esc 3}
    (D F){P} >> ime_cancel ^
    (F P){D} >> ime_cancel ^
    (P D){F} >> ime_cancel ^
  # ^i
    (D F){Semicolon} >> Control{I} ^
    (F Semicolon){D} >> Control{I} ^
    (Semicolon D){F} >> Control{I} ^
  # ^u
    (D F){Slash} >> Control{U} ^
    (F Slash){D} >> Control{U} ^
    (Slash D){F} >> Control{U} ^

  # ^{End}
    (J K){Q} >> ime_complete Control{End}
    (K Q){J} >> ime_complete Control{End}
    (Q J){K} >> ime_complete Control{End}
  # ……{改行}
    (J K){A} >> "……" ime_complete ^
    (K A){J} >> "……" ime_complete ^
    (A J){K} >> "……" ime_complete ^
  # ――{改行}
    (J K){Z} >> "――" ime_complete ^
    (K Z){J} >> "――" ime_complete ^
    (Z J){K} >> "――" ime_complete ^

  # 『』{改行}{↑}
    (J K){W} >> "『』" ime_complete prev_char ^
    (K W){J} >> "『』" ime_complete prev_char ^
    (W J){K} >> "『』" ime_complete prev_char ^
  # (){改行}{↑}
    (J K){S} >> "()" ime_complete prev_char ^
    (K S){J} >> "()" ime_complete prev_char ^
    (S J){K} >> "()" ime_complete prev_char ^
  # 【】{改行}{↑}
    (J K){X} >> "【】" ime_complete prev_char ^
    (K X){J} >> "【】" ime_complete prev_char ^
    (X J){K} >> "【】" ime_complete prev_char ^

  # ？{改行}
    (J K){D} >> Shift{Slash} ime_complete ^
    (K D){J} >> Shift{Slash} ime_complete ^
    (D J){K} >> Shift{Slash} ime_complete ^
  # ！{改行}
    (J K){C} >> Shift{1} ime_complete ^
    (K C){J} >> Shift{1} ime_complete ^
    (C J){K} >> Shift{1} ime_complete ^

  # ^s
    (J K){R} >> Control{S} ^
    (K R){J} >> Control{S} ^
    (R J){K} >> Control{S} ^
  # 「」{改行}{↑} ※英数専用
    (J K){F} >> "「」" ime_complete prev_char ^
    (K F){J} >> "「」" ime_complete prev_char ^
    (F J){K} >> "「」" ime_complete prev_char ^
  # {改行}{↓}
    (J K){V} >> ime_complete next_char ^
    (K V){J} >> ime_complete next_char ^
    (V J){K} >> ime_complete next_char ^

  # ・ ※英数専用
    (J K){T} >> "・" ime_complete ^
    (K T){J} >> "・" ime_complete ^
    (T J){K} >> "・" ime_complete ^
  # 《》{改行}{↑}
    (J K){G} >> "《》" ime_complete prev_char ^
    (K G){J} >> "《》" ime_complete prev_char ^
    (G J){K} >> "《》" ime_complete prev_char ^
  # {改行}{←}
    (J K){B} >> ime_complete next_row ^
    (K B){J} >> ime_complete next_row ^
    (B J){K} >> ime_complete next_row ^

  # +{Home}
    (C V){Y} >> Shift{Home} ^
    (V Y){C} >> Shift{Home} ^
    (Y C){V} >> Shift{Home} ^
  # ^c
    (C V){H} >> Control{C} ^
    (V H){C} >> Control{C} ^
    (H C){V} >> Control{C} ^
  # +{End}
    (C V){N} >> Shift{End} ^
    (V N){C} >> Shift{End} ^
    (N C){V} >> Shift{End} ^

  # ^x
    (C V){U} >> Control{X} ^
    (V U){C} >> Control{X} ^
    (U C){V} >> Control{X} ^
  # {→}
    (C V){J} >> prev_row
    (V J){C} >> prev_row
    (J C){V} >> prev_row
  # {←}
    (C V){M} >> next_row
    (V M){C} >> next_row
    (M C){V} >> next_row

  # ^v
    (C V){I} >> Control{V} ^
    (V I){C} >> Control{V} ^
    (I C){V} >> Control{V} ^
  # +{→}
    (C V){K} >> Shift{prev_row}
    (V K){C} >> Shift{prev_row}
    (K C){V} >> Shift{prev_row}
  # +{←}
    (C V){Comma} >> Shift{next_row}
    (V Comma){C} >> Shift{next_row}
    (Comma C){V} >> Shift{next_row}

  # ^y
    (C V){O} >> Control{Y} ^
    (V O){C} >> Control{Y} ^
    (O C){V} >> Control{Y} ^
  # +{→ 5}
    (C V){L} >> Shift{repeat[prev_row, 5]}
    (V L){C} >> Shift{repeat[prev_row, 5]}
    (L C){V} >> Shift{repeat[prev_row, 5]}
  # +{← 5}
    (C V){Period} >> Shift{repeat[next_row, 5]}
    (V Period){C} >> Shift{repeat[next_row, 5]}
    (Period C){V} >> Shift{repeat[next_row, 5]}

  # ^z
    (C V){P} >> Control{Z} ^
    (V P){C} >> Control{Z} ^
    (P C){V} >> Control{Z} ^
  # +{→ 20}
    (C V){Semicolon} >> Shift{repeat[prev_row, 20]}
    (V Semicolon){C} >> Shift{repeat[prev_row, 20]}
    (Semicolon){V} >> Shift{repeat[prev_row, 20]}
  # +{← 20}
    (C V){Slash} >> Shift{repeat[next_row, 20]}
    (V Slash){C} >> Shift{repeat[next_row, 20]}
    (Slash C){V} >> Shift{repeat[next_row, 20]}

  # {Home}{→}{End}{Del 4}{←}
    (M Comma){Q} >> Home prev_row End repeat[Delete, 4] next_row ^
    (Comma Q){M} >> Home prev_row End repeat[Delete, 4] next_row ^
    (Q M){Comma} >> Home prev_row End repeat[Delete, 4] next_row ^
  # {Home}{→}{End}{Del 2}{←}
    (M Comma){A} >> Home prev_row End repeat[Delete, 2] next_row ^
    (Comma A){M} >> Home prev_row End repeat[Delete, 2] next_row ^
    (A M){Comma} >> Home prev_row End repeat[Delete, 2] next_row ^
  # 　　　×　　　×　　　×{改行 2}
    (M Comma){Z} >> "　　　×　　　×　　　×" ime_complete Enter ^
    (Comma Z){M} >> "　　　×　　　×　　　×" ime_complete Enter ^
    (Z M){Comma} >> "　　　×　　　×　　　×" ime_complete Enter ^

  # ^x『^v』{改行}{Space}+{↑}^x
    (M Comma){W} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma W){M} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (W M){Comma} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # ^x(^v){改行}{Space}+{↑}^x
    (M Comma){S} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma S){M} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (S M){Comma} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # ^x【^v】{改行}{Space}+{↑}^x
    (M Comma){X} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma X){M} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (X M){Comma} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^

  # {Home}{改行}{Space 3}{←}
    (M Comma){E} >> Home Enter{24ms} "　　　" ime_complete next_row ^
    (Comma E){M} >> Home Enter{24ms} "　　　" ime_complete next_row ^
    (E M){Comma} >> Home Enter{24ms} "　　　" ime_complete next_row ^
  # {Home}{改行}{Space 1}{←}
    (M Comma){D} >> Home Enter{24ms} "　" ime_complete next_row ^
    (Comma D){M} >> Home Enter{24ms} "　" ime_complete next_row ^
    (D M){Comma} >> Home Enter{24ms} "　" ime_complete next_row ^
  # ／{改行}
    (M Comma){C} >> "／" ime_complete ^
    (Comma C){M} >> "／" ime_complete ^
    (C M){Comma} >> "／" ime_complete ^

  # {Space 3}
    (M Comma){R} >> "　　　" ime_complete ^
    (Comma R){M} >> "　　　" ime_complete ^
    (R M){Comma} >> "　　　" ime_complete ^

  # ^x「^v」{改行}{Space}+{↑}^x ※英数専用
    (M Comma){F} >> Control{X} "「」" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma F){M} >> Control{X} "「」" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (F M){Comma} >> Control{X} "「」" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # {改行}{End}{改行}「」{改行}{↑} ※英数専用
    (M Comma){V} >> ime_complete End Enter{24ms} "「」" ime_complete prev_char ^
    (Comma V){M} >> ime_complete End Enter{24ms} "「」" ime_complete prev_char ^
    (V M){Comma} >> ime_complete End Enter{24ms} "「」" ime_complete prev_char ^

  # 〇{改行}
    (M Comma){T} >> "〇" ime_complete ^
    (Comma T){M} >> "〇" ime_complete ^
    (T M){Comma} >> "〇" ime_complete ^
  # ^x｜{改行}^v《》{改行}{↑}{Space}+{↑}^x
    (M Comma){G} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
    (Comma G){M} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
    (G M){Comma} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
  # {改行}{End}{改行}{Space}
    (M Comma){B} >> ime_complete End Enter{24ms} "　" ime_complete ^
    (Comma B){M} >> ime_complete End Enter{24ms} "　" ime_complete ^
    (B M){Comma} >> ime_complete End Enter{24ms} "　" ime_complete ^

# ********** 2キー同時 **********
# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# =============================================
# かなモード
# =============================================
[modifier = "NagenataMode !Meta !Control !Alt"]

# 左右シフト+アルファベット で英数モードに
  Shift{A} >> Shift{A} !Shift ime_off ^
  Shift{B} >> Shift{B} !Shift ime_off ^
  Shift{C} >> Shift{C} !Shift ime_off ^
  Shift{D} >> Shift{D} !Shift ime_off ^
  Shift{E} >> Shift{E} !Shift ime_off ^
  Shift{F} >> Shift{F} !Shift ime_off ^
  Shift{G} >> Shift{G} !Shift ime_off ^
  Shift{H} >> Shift{H} !Shift ime_off ^
  Shift{I} >> Shift{I} !Shift ime_off ^
  Shift{J} >> Shift{J} !Shift ime_off ^
  Shift{K} >> Shift{K} !Shift ime_off ^
  Shift{L} >> Shift{L} !Shift ime_off ^
  Shift{M} >> Shift{M} !Shift ime_off ^
  Shift{N} >> Shift{N} !Shift ime_off ^
  Shift{O} >> Shift{O} !Shift ime_off ^
  Shift{P} >> Shift{P} !Shift ime_off ^
  Shift{Q} >> Shift{Q} !Shift ime_off ^
  Shift{R} >> Shift{R} !Shift ime_off ^
  Shift{S} >> Shift{S} !Shift ime_off ^
  Shift{T} >> Shift{T} !Shift ime_off ^
  Shift{U} >> Shift{U} !Shift ime_off ^
  Shift{V} >> Shift{V} !Shift ime_off ^
  Shift{W} >> Shift{W} !Shift ime_off ^
  Shift{X} >> Shift{X} !Shift ime_off ^
  Shift{Y} >> Shift{Y} !Shift ime_off ^
  Shift{Z} >> Shift{Z} !Shift ime_off ^
# 左右シフト+アルファベット以外
  Shift{Semicolon}  >> Shift{Semicolon}
  Shift{Comma}      >> Shift{Comma}
  Shift{Period}     >> Shift{Period}
  Shift{Slash}      >> Shift{Slash}

# ********** センターシフト **********
  Space{Q} >> V U ^ # ヴ
  Space{W} >> N U ^ # ぬ
  Space{E} >> R I ^ # り
  Space{R} >> N E ^ # ね
  Space{T} >> Shift{next_row}  # +{←}
  Space{Y} >> Shift{prev_row}  # +{→}
  Space{U} >> S A ^ # さ
  Space{I} >> Y O ^ # よ
  Space{O} >> E ^   # え
  Space{P} >> Y U ^ # ゆ
  Space{A} >> S E ^ # せ
  Space{S} >> M E ^ # め
  Space{D} >> N I ^ # に
  Space{F} >> M A ^ # ま
  Space{G} >> T I ^ # ち
  Space{H} >> Y A ^ # や
  Space{J} >> N O ^ # の
  Space{K} >> M O ^ # も
  Space{L} >> T U ^ # つ
  Space{Semicolon} >> H U ^ # ふ
  Space{Z} >> H O ^ # ほ
  Space{X} >> H I ^ # ひ
  Space{C} >> W O ^ # を
  Space{V} >> Comma Enter ^ # 、
  Space{B} >> M I ^ # み
  Space{N} >> O ^   # お
  Space{M} >> Period Enter ^  # 。
  Space{Comma} >> M U ^   # む
  Space{Period} >> W A ^  # わ
  Space{Slash} >> R E ^   # れ

# ********** 3キー同時 **********
# 拗音、外来音
  # ぎゃ
    (J H){W} >> G Y A ^
    (H W){J} >> G Y A ^
    (W J){H} >> G Y A ^
  # じゃ
    (J H){R} >> J A ^
    (H R){J} >> J A ^
    (R J){H} >> J A ^
  # ぢゃ
    (J H){G} >> D Y A ^
    (H G){J} >> D Y A ^
    (G J){H} >> D Y A ^
  # びゃ
    (J H){X} >> B Y A ^
    (H X){J} >> B Y A ^
    (X J){H} >> B Y A ^
  # ぎゅ
    (J P){W} >> G Y U ^
    (P W){J} >> G Y U ^
    (W J){P} >> G Y U ^
  # じゅ
    (J P){R} >> J U ^
    (P R){J} >> J U ^
    (R J){P} >> J U ^
  # ぢゅ
    (J P){G} >> D Y U ^
    (P G){J} >> D Y U ^
    (G J){P} >> D Y U ^
  # びゅ
    (J P){X} >> B Y U ^
    (P X){J} >> B Y U ^
    (X J){P} >> B Y U ^
  # ぎょ
    (J I){W} >> G Y O ^
    (I W){J} >> G Y O ^
    (W J){I} >> G Y O ^
  # じょ
    (J I){R} >> J O ^
    (I R){J} >> J O ^
    (R J){I} >> J O ^
  # ぢょ
    (J I){G} >> D Y O ^
    (I G){J} >> D Y O ^
    (G J){I} >> D Y O ^
  # びょ
    (J I){X} >> B Y O ^
    (I X){J} >> B Y O ^
    (X J){I} >> B Y O ^
  # ぴょ
    (M X){I} >> P Y O ^
    (X I){M} >> P Y O ^
    (I M){X} >> P Y O ^
  # ぴゅ
    (M X){P} >> P Y U ^
    (X P){M} >> P Y U ^
    (P M){X} >> P Y U ^
  # ぴゃ
    (M X){H} >> P Y A ^
    (X H){M} >> P Y A ^
    (H M){X} >> P Y A ^
  # てゅ
    (M E){P} >> T H U ^
    (E P){M} >> T H U ^
    (P M){E} >> T H U ^
  # てぃ
    (M E){K} >> T H I ^
    (E K){M} >> T H I ^
    (K M){E} >> T H I ^
  # でゅ
    (J E){P} >> D H U ^
    (E P){J} >> D H U ^
    (P J){E} >> D H U ^
  # でぃ
    (J E){K} >> D H I ^
    (E K){J} >> D H I ^
    (K J){E} >> D H I ^
  # とぅ
    (M D){L} >> T W U ^
    (D L){M} >> T W U ^
    (L M){D} >> T W U ^
  # どぅ
    (J D){L} >> D W U ^
    (D L){J} >> D W U ^
    (L J){D} >> D W U ^
  # しぇ
    (M R){O} >> S Y E ^
    (R O){M} >> S Y E ^
    (O M){R} >> S Y E ^
  # ちぇ
    (M G){O} >> T Y E ^
    (G O){M} >> T Y E ^
    (O M){G} >> T Y E ^
  # じぇ
    (J R){O} >> J E ^
    (R O){J} >> J E ^
    (O J){R} >> J E ^
  # ぢぇ
    (J G){O} >> D Y E ^
    (G O){J} >> D Y E ^
    (O J){G} >> D Y E ^
  # ふぇ
    (V Semicolon){O} >> F E ^
    (Semicolon O){V} >> F E ^
    (O V){Semicolon} >> F E ^
  # ふゅ
    (V Semicolon){P} >> F Y U ^
    (Semicolon P){V} >> F Y U ^
    (P V){Semicolon} >> F Y U ^
  # ふぁ
    (V Semicolon){J} >> F A ^
    (Semicolon J){V} >> F A ^
    (J V){Semicolon} >> F A ^
  # ふぃ
    (V Semicolon){K} >> F I ^
    (Semicolon K){V} >> F I ^
    (K V){Semicolon} >> F I ^
  # ふぉ
    (V Semicolon){N} >> F O ^
    (Semicolon N){V} >> F O ^
    (N V){Semicolon} >> F O ^
  # ヴぇ
    (M Q){O} >> V E ^
    (Q O){M} >> V E ^
    (O M){Q} >> V E ^
  # ヴゅ
    (M Q){P} >> V Y U ^
    (Q P){M} >> V Y U ^
    (P M){Q} >> V Y U ^
  # ヴぁ
    (M Q){J} >> V A ^
    (Q J){M} >> V A ^
    (J M){Q} >> V A ^
  # ヴぃ
    (M Q){K} >> V I ^
    (Q K){M} >> V I ^
    (K M){Q} >> V I ^
  # ヴぉ
    (M Q){N} >> V O ^
    (Q N){M} >> V O ^
    (N M){Q} >> V O ^
  # うぇ
    (V L){O} >> W E ^
    (L O){V} >> W E ^
    (O V){L} >> W E ^
  # うぃ
    (V L){K} >> W I ^
    (L K){V} >> W I ^
    (K V){L} >> W I ^
  # うぉ
    (V L){N} >> W H O ^
    (L N){V} >> W H O ^
    (N V){L} >> W H O ^
  # いぇ
    (V K){O} >> Y E ^
    (K O){V} >> Y E ^
    (O V){K} >> Y E ^
  # つぁ
    (V L){J} >> T S A ^
    (L J){V} >> T S A ^
    (J V){L} >> T S A ^
  # くぇ
    (V H){O} >> Q E ^
    (H O){V} >> Q E ^
    (O V){H} >> Q E ^
  # くぁ
    (V H){J} >> Q A ^
    (H J){V} >> Q A ^
    (J V){H} >> Q A ^
  # くぃ
    (V H){K} >> Q I ^
    (H K){V} >> Q I ^
    (K V){H} >> Q I ^
  # くぉ
    (V H){N} >> Q O ^
    (H N){V} >> Q O ^
    (N V){H} >> Q O ^
  # くゎ
    (V H){Period} >> K U X W A ^
    (H Period){V} >> K U X W A ^
    (Period V){H} >> K U X W A ^
  # ぐぇ
    (F H){O} >> G W E ^
    (H O){F} >> G W E ^
    (O F){H} >> G W E ^
  # ぐぁ
    (F H){J} >> G W A ^
    (H J){F} >> G W A ^
    (J F){H} >> G W A ^
  # ぐぃ
    (F H){K} >> G W I ^
    (H K){F} >> G W I ^
    (K F){H} >> G W I ^
  # ぐぉ
    (F H){N} >> G W O ^
    (H N){F} >> G W O ^
    (N F){H} >> G W O ^
  # ぐゎ
    (F H){Period} >> G U X W A ^
    (H Period){F} >> G U X W A ^
    (Period F){H} >> G U X W A ^

# 編集モード
  # {Home}
    (D F){Y} >> Home ^
    (F Y)(D) >> Home ^
    (Y D){F} >> Home ^
  # {Enter}{End}
    (D F){H} >> ime_complete End ^
    (F H){D} >> ime_complete End ^
    (H D){F} >> ime_complete End ^
  # {End}
    (D F){N} >> End ^
    (F N){D} >> End ^
    (N D){F} >> End ^

  # +{End}{BS}
    (D F){U} >> Shift{End} Backspace ^
    (F U){D} >> Shift{End} Backspace ^
    (U D){F} >> Shift{End} Backspace ^
  # {↑}
    (D F){J} >> prev_char
    (F J){D} >> prev_char
    (J D){F} >> prev_char
  # {↓}
    (D F){M} >> next_char
    (F M){D} >> next_char
    (M D){F} >> next_char

  # {vk1Csc079}
    (D F){I} >> Meta{Slash} ^
    (F I){D} >> Meta{Slash} ^
    (I D){F} >> Meta{Slash} ^
  # +{↑}
    (D F){K} >> Shift{prev_char}
    (F K){D} >> Shift{prev_char}
    (K D){F} >> Shift{prev_char}
  # +{↓}
    (D F){Comma} >> Shift{next_char}
    (F Comma){D} >> Shift{next_char}
    (Comma D){F} >> Shift{next_char}

  # {Del}
    (D F){O} >> Delete
    (F O){D} >> Delete
    (O D){F} >> Delete
  # +{↑ 7}
    (D F){L} >> Shift{repeat[prev_char, 7]}
    (F L){D} >> Shift{repeat[prev_char, 7]}
    (L D){F} >> Shift{repeat[prev_char, 7]}
  # +{↓ 7}
    (D F){Period} >> Shift{repeat[next_char, 7]}
    (F Period){D} >> Shift{repeat[next_char, 7]}
    (Period D){F} >> Shift{repeat[next_char, 7]}

  # {Esc 3}
    (D F){P} >> ime_cancel ^
    (F P){D} >> ime_cancel ^
    (P D){F} >> ime_cancel ^
  # ^i
    (D F){Semicolon} >> Control{I} ^
    (F Semicolon){D} >> Control{I} ^
    (Semicolon D){F} >> Control{I} ^
  # ^u
    (D F){Slash} >> Control{U} ^
    (F Slash){D} >> Control{U} ^
    (Slash D){F} >> Control{U} ^

  # ^{End}
    (J K){Q} >> ime_complete Control{End}
    (K Q){J} >> ime_complete Control{End}
    (Q J){K} >> ime_complete Control{End}
  # ……{改行}
    (J K){A} >> "……" ime_complete ^
    (K A){J} >> "……" ime_complete ^
    (A J){K} >> "……" ime_complete ^
  # ――{改行}
    (J K){Z} >> "――" ime_complete ^
    (K Z){J} >> "――" ime_complete ^
    (Z J){K} >> "――" ime_complete ^

  # 『』{改行}{↑}
    (J K){W} >> "『』" ime_complete prev_char ^
    (K W){J} >> "『』" ime_complete prev_char ^
    (W J){K} >> "『』" ime_complete prev_char ^
  # (){改行}{↑}
    (J K){S} >> "()" ime_complete prev_char ^
    (K S){J} >> "()" ime_complete prev_char ^
    (S J){K} >> "()" ime_complete prev_char ^
  # 【】{改行}{↑}
    (J K){X} >> "【】" ime_complete prev_char ^
    (K X){J} >> "【】" ime_complete prev_char ^
    (X J){K} >> "【】" ime_complete prev_char ^

  # ？{改行}
    (J K){D} >> Shift{Slash} ime_complete ^
    (K D){J} >> Shift{Slash} ime_complete ^
    (D J){K} >> Shift{Slash} ime_complete ^
  # ！{改行}
    (J K){C} >> Shift{1} ime_complete ^
    (K C){J} >> Shift{1} ime_complete ^
    (C J){K} >> Shift{1} ime_complete ^

  # ^s
    (J K){R} >> Control{S} ^
    (K R){J} >> Control{S} ^
    (R J){K} >> Control{S} ^
  # 「」{改行}{↑} ※かな専用
    (J K){F} >> "[]" ime_complete prev_char ^
    (K F){J} >> "[]" ime_complete prev_char ^
    (F J){K} >> "[]" ime_complete prev_char ^
  # {改行}{↓}
    (J K){V} >> ime_complete next_char ^
    (K V){J} >> ime_complete next_char ^
    (V J){K} >> ime_complete next_char ^

  # ・ ※かな専用
    (J K){T} >> Slash ^
    (K T){J} >> Slash ^
    (T J){K} >> Slash ^
  # 《》{改行}{↑}
    (J K){G} >> "《》" ime_complete prev_char ^
    (K G){J} >> "《》" ime_complete prev_char ^
    (G J){K} >> "《》" ime_complete prev_char ^
  # {改行}{←}
    (J K){B} >> ime_complete next_row ^
    (K B){J} >> ime_complete next_row ^
    (B J){K} >> ime_complete next_row ^

  # +{Home}
    (C V){Y} >> Shift{Home} ^
    (V Y){C} >> Shift{Home} ^
    (Y C){V} >> Shift{Home} ^
  # ^c
    (C V){H} >> Control{C} ^
    (V H){C} >> Control{C} ^
    (H C){V} >> Control{C} ^
  # +{End}
    (C V){N} >> Shift{End} ^
    (V N){C} >> Shift{End} ^
    (N C){V} >> Shift{End} ^

  # ^x
    (C V){U} >> Control{X} ^
    (V U){C} >> Control{X} ^
    (U C){V} >> Control{X} ^
  # {→}
    (C V){J} >> prev_row
    (V J){C} >> prev_row
    (J C){V} >> prev_row
  # {←}
    (C V){M} >> next_row
    (V M){C} >> next_row
    (M C){V} >> next_row

  # ^v
    (C V){I} >> Control{V} ^
    (V I){C} >> Control{V} ^
    (I C){V} >> Control{V} ^
  # +{→}
    (C V){K} >> Shift{prev_row}
    (V K){C} >> Shift{prev_row}
    (K C){V} >> Shift{prev_row}
  # +{←}
    (C V){Comma} >> Shift{next_row}
    (V Comma){C} >> Shift{next_row}
    (Comma C){V} >> Shift{next_row}

  # ^y
    (C V){O} >> Control{Y} ^
    (V O){C} >> Control{Y} ^
    (O C){V} >> Control{Y} ^
  # +{→ 5}
    (C V){L} >> Shift{repeat[prev_row, 5]}
    (V L){C} >> Shift{repeat[prev_row, 5]}
    (L C){V} >> Shift{repeat[prev_row, 5]}
  # +{← 5}
    (C V){Period} >> Shift{repeat[next_row, 5]}
    (V Period){C} >> Shift{repeat[next_row, 5]}
    (Period C){V} >> Shift{repeat[next_row, 5]}

  # ^z
    (C V){P} >> Control{Z} ^
    (V P){C} >> Control{Z} ^
    (P C){V} >> Control{Z} ^
  # +{→ 20}
    (C V){Semicolon} >> Shift{repeat[prev_row, 20]}
    (V Semicolon){C} >> Shift{repeat[prev_row, 20]}
    (Semicolon){V} >> Shift{repeat[prev_row, 20]}
  # +{← 20}
    (C V){Slash} >> Shift{repeat[next_row, 20]}
    (V Slash){C} >> Shift{repeat[next_row, 20]}
    (Slash C){V} >> Shift{repeat[next_row, 20]}

  # {Home}{→}{End}{Del 4}{←}
    (M Comma){Q} >> Home prev_row End repeat[Delete, 4] next_row ^
    (Comma Q){M} >> Home prev_row End repeat[Delete, 4] next_row ^
    (Q M){Comma} >> Home prev_row End repeat[Delete, 4] next_row ^
  # {Home}{→}{End}{Del 2}{←}
    (M Comma){A} >> Home prev_row End repeat[Delete, 2] next_row ^
    (Comma A){M} >> Home prev_row End repeat[Delete, 2] next_row ^
    (A M){Comma} >> Home prev_row End repeat[Delete, 2] next_row ^
  # 　　　×　　　×　　　×{改行 2}
    (M Comma){Z} >> ime_complete Backquote "　　　×　　　×　　　×" KanaMode Enter ^
    (Comma Z){M} >> ime_complete Backquote "　　　×　　　×　　　×" KanaMode Enter ^
    (Z M){Comma} >> ime_complete Backquote "　　　×　　　×　　　×" KanaMode Enter ^

  # ^x『^v』{改行}{Space}+{↑}^x
    (M Comma){W} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma W){M} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (W M){Comma} >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # ^x(^v){改行}{Space}+{↑}^x
    (M Comma){S} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma S){M} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (S M){Comma} >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # ^x【^v】{改行}{Space}+{↑}^x
    (M Comma){X} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma X){M} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (X M){Comma} >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^

  # {Home}{改行}{Space 3}{←}
    (M Comma){E} >> Home Enter{24ms} "　　　" ime_complete next_row ^
    (Comma E){M} >> Home Enter{24ms} "　　　" ime_complete next_row ^
    (E M){Comma} >> Home Enter{24ms} "　　　" ime_complete next_row ^
  # {Home}{改行}{Space 1}{←}
    (M Comma){D} >> Home Enter{24ms} "　" ime_complete next_row ^
    (Comma D){M} >> Home Enter{24ms} "　" ime_complete next_row ^
    (D M){Comma} >> Home Enter{24ms} "　" ime_complete next_row ^
  # ／{改行}
    (M Comma){C} >> "／" ime_complete ^
    (Comma C){M} >> "／" ime_complete ^
    (C M){Comma} >> "／" ime_complete ^

  # {Space 3}
    (M Comma){R} >> "　　　" ime_complete ^
    (Comma R){M} >> "　　　" ime_complete ^
    (R M){Comma} >> "　　　" ime_complete ^

  # ^x「^v」{改行}{Space}+{↑}^x ※かな専用
    (M Comma){F} >> Control{X} "[]" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (Comma F){M} >> Control{X} "[]" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
    (F M){Comma} >> Control{X} "[]" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^
  # {改行}{End}{改行}「」{改行}{↑} ※かな専用
    (M Comma){V} >> ime_complete End Enter{24ms} "[]" ime_complete prev_char ^
    (Comma V){M} >> ime_complete End Enter{24ms} "[]" ime_complete prev_char ^
    (V M){Comma} >> ime_complete End Enter{24ms} "[]" ime_complete prev_char ^

  # 〇{改行}
    (M Comma){T} >> "〇" ime_complete ^
    (Comma T){M} >> "〇" ime_complete ^
    (T M){Comma} >> "〇" ime_complete ^
  # ^x｜{改行}^v《》{改行}{↑}{Space}+{↑}^x
    (M Comma){G} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
    (Comma G){M} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
    (G M){Comma} >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^
  # {改行}{End}{改行}{Space}
    (M Comma){B} >> ime_complete End Enter{24ms} "　" ime_complete ^
    (Comma B){M} >> ime_complete End Enter{24ms} "　" ime_complete ^
    (B M){Comma} >> ime_complete End Enter{24ms} "　" ime_complete ^

# 固有名詞ショートカット  ※ U+I または E+R を先に押さなければなりません
  # (U I){Q} >> "" ^
  # (U I){A} >> "三神" ^
  # (U I){Z} >> "火よ、在れ" ^
  # (U I){W} >> "臨兵闘者皆陣烈在前" ^
  # (U I){S} >> "峯" ^
  # (U I){X} >> "火の剣" ^
  # (U I){E} >> "天狗" ^
  # (U I){D} >> "小鴉" ^
  # (U I){C} >> "罵詈雑" ^
  # (U I){R} >> "シンイチ" ^
  # (U I){F} >> "光太郎" ^
  # (U I){V} >> "心の闇" ^
  # (U I){T} >> "ネムカケ" ^
  # (U I){G} >> "" ^
  # (U I){B} >> "" ^
  # (E R){Y} >> "才一" ^
  # (E R){H} >> "鞍馬" ^
  # (E R){N} >> "鬼塚" ^
  # (E R){U} >> "さくら" ^
  # (E R){J} >> "青鬼" ^
  # (E R){M} >> "赤石" ^
  # (E R){I} >> "酒田" ^
  # (E R){K} >> "百地" ^
  # (E R){Comma} >> "八幡" ^
  # (E R){O} >> "" ^
  # (E R){L} >> "" ^
  # (E R){Period} >> "" ^
  # (E R){P} >> "" ^
  # (E R){Semicolon} >> "不動金縛りの術" ^
  # (E R){Slash} >> "霊槍" ^

# ********** 2キー同時 **********
# 濁音
  (F U) >> Z A ^  # ざ
  (F O) >> Z U ^  # ず
  (F P) >> B E ^  # べ
  (F H) >> G U ^  # ぐ
  (F L) >> D U ^  # づ
  (F Semicolon) >> B U ^  # ぶ
  (F N) >> D A ^  # だ
  (J W) >> G I ^  # ぎ
  (J E) >> D E ^  # で
  (J R) >> Z I ^  # じ
  (J A) >> Z E ^  # ぜ
  (J S) >> G E ^  # げ
  (J D) >> D O ^  # ど
  (J F) >> G A ^  # が
  (J G) >> D I ^  # ぢ
  (J Z) >> B O ^  # ぼ
  (J X) >> B I ^  # び
  (J C) >> B A ^  # ば
  (J V) >> G O ^  # ご
  (J B) >> Z O ^  # ぞ

# 半濁音
  (V P) >> P E ^  # ぺ
  (V Semicolon) >> P U ^  # ぷ
  (M Z) >> P O ^  # ぽ
  (M X) >> P I ^  # ぴ
  (M C) >> P A ^  # ぱ

# 小書き
  (Q I) >> X Y O ^  # ょ
  (Q O) >> X E ^    # ぇ
  (Q P) >> X Y U ^  # ゅ
  (Q H) >> X Y A ^  # ゃ
  (Q J) >> X A ^    # ぁ
  (Q K) >> X I ^    # ぃ
  (Q L) >> X U ^    # ぅ
  (Q N) >> X O ^    # ぉ
  (Q Period) >> X W A ^ # ゎ

# 拗音、外来音
  (H W) >> K Y A ^  # きゃ
  (H E) >> R Y A ^  # りゃ
  (H R) >> S Y A ^  # しゃ
  (H D) >> N Y A ^  # にゃ
  (H G) >> T Y A ^  # ちゃ
  (H X) >> H Y A ^  # ひゃ
  (H B) >> M Y A ^  # みゃ
  (P W) >> K Y U ^  # きゅ
  (P E) >> R Y U ^  # りゅ
  (P R) >> S Y U ^  # しゅ
  (P D) >> N Y U ^  # にゅ
  (P G) >> T Y U ^  # ちゅ
  (P X) >> H Y U ^  # ひゅ
  (P B) >> M Y U ^  # みゅ
  (I W) >> K Y O ^  # きょ
  (I E) >> R Y O ^  # りょ
  (I R) >> S Y O ^  # しょ
  (I D) >> N Y O ^  # にょ
  (I G) >> T Y O ^  # ちょ
  (I X) >> H Y O ^  # ひょ
  (I B) >> M Y O ^  # みょ

# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# ********** 単打 **********
  Q >>  V U ^ # ヴ
  W >>  K I ^ # き
  E >>  T E ^ # て
  R >>  S I ^ # し
  T >>  next_row  # {←}
  Y >>  prev_row  # {→}
  U >>  Backspace
  I >>  R U ^ # る
  O >>  S U ^ # す
  P >>  H E ^ # へ
  A >>  R O ^ # ろ
  S >>  K E ^ # け
  D >>  T O ^ # と
  F >>  K A ^ # か
  G >>  X T U ^ # っ
  H >>  K U ^ # く
  J >>  A ^ # あ
  K >>  I ^ # い
  L >>  U ^ # う
  Semicolon >> Minus ^  # ー
  Z >>  H O ^ # ほ
  X >>  H I ^ # ひ
  C >>  H A ^ # は
  V >>  K O ^ # こ
  B >>  S O ^ # そ
  N >>  T A ^ # た
  M >>  N A ^ # な
  Comma >>  N N ^ # ん
  Period >> R A ^ # ら
  Slash >>  R E ^ # れ

[default] # [stage] としても良い
