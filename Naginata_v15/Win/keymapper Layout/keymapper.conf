# keymapper 薙刀式
#   2025年07月18日 @deepprog [keymapper 薙刀式の設定](https://qiita.com/deepprog/items/4d18a8cc4ab628ee9fb9)
#     / 2025 tor-nky
# ※keymapper の Windows版専用の設定ファイルです

# IMEのキー設定(必須)
# |      * キー     |入力/変換済み文字なし|  他  |
# |-----------------|---------------------|------|
# |Ctrl+Shift+無変換|          -          |全消去|
# |Ctrl+Shift+変換  |          -          |全確定|

# 【資料】
# ----------------------------------------------------------------------
# 薙刀式配列v15（fix版）　　作　大岡俊彦
# 2023年7月28日[【薙刀式】v15fix版、発表](http://oookaworks.seesaa.net/article/500180437.html#gsc.tab=0)
# ----------------------------------------------------------------------
# [keymapper](https://github.com/houmain/keymapper)
#   ポータブル版を使う場合、keymapper.exe と keymapperd.exe を一緒に実行する
# ----------------------------------------------------------------------

@options no-update

@allow-unmapped-commands
@enforce-lowercase-commands
@forward-modifiers Shift Control Alt

[default]
  NagenataMode = Virtual72

# 縦書き用
#   ※縦書き用にする場合は下4行をコメントアウトし、その下の横書き用をコメントにする
  # prev_char = ArrowUp
  # next_char = ArrowDown
  # prev_row  = ArrowRight
  # next_row  = ArrowLeft
# 横書き用
  prev_char   = ArrowLeft
  next_char   = ArrowRight
  prev_row    = ArrowUp
  next_row    = ArrowDown


  ime_cancel = Control{Shift{NonConvert}} # Ctrl+Shift+無変換 → 全消去
  ime_complete = Control{Shift{Convert}}  # Ctrl+Shift+変換 → 全確定
  # ime_on = !NagenataMode NagenataMode Lang1 # かなオン
  # ime_off = !NagenataMode 8ms ime_complete 8ms Lang2 # かなオフ
  ime_on = !NagenataMode NagenataMode KanaMode KanaMode # かなオン
  ime_off = !NagenataMode 8ms ime_complete 8ms KanaMode Backquote # かなオフ

# IME on アプリ定義
[system="Windows" title = "iText"]
  ContextActive >> ime_on

# IME off アプリ定義
[system="Windows" class = "Notepad"]
  ContextActive >> ime_off

# =============================================
# 英数モード
# =============================================
[modifier = "!NagenataMode !Shift !Meta !Control !Alt"]

#　キーボード側のSandSを使う場合は
#　コメントアウトして無効化してください
# SandS
  Space{Any} >> Shift{Any}

# ********** 3キー同時 **********
# 編集モード
  (D F Y) >> Home ^ # {Home}
  (D F H) >> ime_complete End ^ # {Enter}{End}
  (D F N) >> End ^ # {End}
  (D F U) >> Shift{End} Backspace ^ # +{End}{BS}
  (D F J) >> prev_char # {↑}
  (D F M) >> next_char # {↓}
  (D F I)     >> Meta{Slash} ^ # {vk1Csc079}
  (D F K)     >> Shift{prev_char} # +{↑}
  (D F Comma) >> Shift{next_char} # +{↓}
  (D F O)      >> Delete # {Del}
  (D F L)      >> Shift{repeat[prev_char, 7]} # +{↑ 7}
  (D F Period) >> Shift{repeat[next_char, 7]} # +{↓ 7}
  (D F P)         >> ime_cancel ^ # {Esc 3}
  (D F Semicolon) >> Control{I} ^ # ^i
  (D F Slash)     >> Control{U} ^ # ^u
  (J K Q) >> ime_complete Control{End} # ^{End}
  (J K A) >> "……" ime_complete ^ # ……{改行}
  (J K Z) >> "――" ime_complete ^ # ――{改行}
  (J K W) >> "『』" ime_complete prev_char ^ # 『』{改行}{↑}
  (J K S) >> "()" ime_complete prev_char ^ # (){改行}{↑}
  (J K X) >> "【】" ime_complete prev_char ^ # 【】{改行}{↑}
  (J K D) >> Shift{Slash} ime_complete ^ # ？{改行}
  (J K C) >> Shift{1} ime_complete ^ # ！{改行}
  (J K R) >> Control{S} ^ # ^s
  (J K F) >> "「」" ime_complete prev_char ^ # 「」{改行}{↑}
  (J K V) >> ime_complete next_char ^ # {改行}{↓}
  (J K T) >> "・" ime_complete ^ # ・
  (J K G) >> "《》" ime_complete prev_char ^ # 《》{改行}{↑}
  (J K B) >> ime_complete next_row ^ # {改行}{←}
  (C V Y) >> Shift{Home} ^ # +{Home}
  (C V H) >> Control{C} ^ # ^c
  (C V N) >> Shift{End} ^ # +{End}
  (C V U) >> Control{X} ^ # ^x
  (C V J) >> prev_row # {→}
  (C V M) >> next_row # {←}
  (C V I)     >> Control{V} ^ # ^v
  (C V K)     >> Shift{prev_row} # +{→}
  (C V Comma) >> Shift{next_row} # +{←}
  (C V O)      >> Control{Y} ^ # ^y
  (C V L)      >> Shift{repeat[prev_row, 5]} # +{→ 5}
  (C V Period) >> Shift{repeat[next_row, 5]} # +{← 5}
  (C V P)         >> Control{Z} ^ # ^z
  (C V Semicolon) >> Shift{repeat[prev_row, 20]} # +{→ 20}
  (C V Slash)     >> Shift{repeat[next_row, 20]} # +{← 20}
  (M Comma Q) >> Home prev_row End repeat[Delete, 4] next_row ^ # {Home}{→}{End}{Del 4}{←}
  (M Comma A) >> Home prev_row End repeat[Delete, 2] next_row ^ # {Home}{→}{End}{Del 2}{←}
  (M Comma Z) >> "　　　×　　　×　　　×" ime_complete Enter ^ # 　　　×　　　×　　　×{改行 2}
  (M Comma W) >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x『^v』{改行}{Space}+{↑}^x
  (M Comma S) >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x(^v){改行}{Space}+{↑}^x
  (M Comma X) >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x【^v】{改行}{Space}+{↑}^x
  (M Comma E) >> Home Enter{24ms} "　　　" ime_complete next_row ^ # {Home}{改行}{Space 3}{←}
  (M Comma D) >> Home Enter{24ms} "　" ime_complete next_row ^ # {Home}{改行}{Space 1}{←}
  (M Comma C) >> "／" ime_complete ^ # ／{改行}
  (M Comma R) >> "　　　" ime_complete ^ # {Space 3}
  (M Comma F) >> Control{X} "「」" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x「^v」{改行}{Space}+{↑}^x
  (M Comma V) >> ime_complete End Enter{24ms} "「」" ime_complete prev_char ^ # {改行}{End}{改行}「」{改行}{↑}
  (M Comma T) >> "〇" ime_complete ^ # 〇{改行}
  (M Comma G) >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^ # ^x｜{改行}^v《》{改行}{↑}{Space}+{↑}^x
  (M Comma B) >> ime_complete End Enter{24ms} "　" ime_complete ^ # {改行}{End}{改行}{Space}

# ********** 2キー同時 **********
# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# =============================================
# かなモード
# =============================================
[modifier = "NagenataMode !Meta !Control !Alt"]

# 左右シフト+アルファベット で英数モードに
  Shift{A} >> Shift{A} !Shift ime_off ^
  Shift{B} >> Shift{B} !Shift ime_off ^
  Shift{C} >> Shift{C} !Shift ime_off ^
  Shift{D} >> Shift{D} !Shift ime_off ^
  Shift{E} >> Shift{E} !Shift ime_off ^
  Shift{F} >> Shift{F} !Shift ime_off ^
  Shift{G} >> Shift{G} !Shift ime_off ^
  Shift{H} >> Shift{H} !Shift ime_off ^
  Shift{I} >> Shift{I} !Shift ime_off ^
  Shift{J} >> Shift{J} !Shift ime_off ^
  Shift{K} >> Shift{K} !Shift ime_off ^
  Shift{L} >> Shift{L} !Shift ime_off ^
  Shift{M} >> Shift{M} !Shift ime_off ^
  Shift{N} >> Shift{N} !Shift ime_off ^
  Shift{O} >> Shift{O} !Shift ime_off ^
  Shift{P} >> Shift{P} !Shift ime_off ^
  Shift{Q} >> Shift{Q} !Shift ime_off ^
  Shift{R} >> Shift{R} !Shift ime_off ^
  Shift{S} >> Shift{S} !Shift ime_off ^
  Shift{T} >> Shift{T} !Shift ime_off ^
  Shift{U} >> Shift{U} !Shift ime_off ^
  Shift{V} >> Shift{V} !Shift ime_off ^
  Shift{W} >> Shift{W} !Shift ime_off ^
  Shift{X} >> Shift{X} !Shift ime_off ^
  Shift{Y} >> Shift{Y} !Shift ime_off ^
  Shift{Z} >> Shift{Z} !Shift ime_off ^
# 左右シフト+アルファベット以外
  Shift{Semicolon}  >> Shift{Semicolon}
  Shift{Comma}      >> Shift{Comma}
  Shift{Period}     >> Shift{Period}
  Shift{Slash}      >> Shift{Slash}

# ********** センターシフト **********
  Space{Q} >> V U ^ # ヴ
  Space{W} >> N U ^ # ぬ
  Space{E} >> R I ^ # り
  Space{R} >> N E ^ # ね
  Space{T} >> Shift{next_row}  # +{←}
  Space{Y} >> Shift{prev_row}  # +{→}
  Space{U} >> S A ^ # さ
  Space{I} >> Y O ^ # よ
  Space{O} >> E ^   # え
  Space{P} >> Y U ^ # ゆ
  Space{A} >> S E ^ # せ
  Space{S} >> M E ^ # め
  Space{D} >> N I ^ # に
  Space{F} >> M A ^ # ま
  Space{G} >> T I ^ # ち
  Space{H} >> Y A ^ # や
  Space{J} >> N O ^ # の
  Space{K} >> M O ^ # も
  Space{L} >> T U ^ # つ
  Space{Semicolon} >> H U ^ # ふ
  Space{Z} >> H O ^ # ほ
  Space{X} >> H I ^ # ひ
  Space{C} >> W O ^ # を
  Space{V} >> Comma Enter ^ # 、
  Space{B} >> M I ^ # み
  Space{N} >> O ^   # お
  Space{M} >> Period Enter ^  # 。
  Space{Comma} >> M U ^   # む
  Space{Period} >> W A ^  # わ
  Space{Slash} >> R E ^   # れ

# ********** 3キー同時 **********
# 拗音、外来音
  (J H W) >> G Y A ^  # ぎゃ
  (J H R) >> J A ^    # じゃ
  (J H G) >> D Y A ^  # ぢゃ
  (J H X) >> B Y A ^  # びゃ
  (J P W) >> G Y U ^  # ぎゅ
  (J P R) >> J U ^    # じゅ
  (J P G) >> D Y U ^  # ぢゅ
  (J P X) >> B Y U ^  # びゅ
  (J I W) >> G Y O ^  # ぎょ
  (J I R) >> J O ^    # じょ
  (J I G) >> D Y O ^  # ぢょ
  (J I X) >> B Y O ^  # びょ
  (M X I) >> P Y O ^  # ぴょ
  (M X P) >> P Y U ^  # ぴゅ
  (M X H) >> P Y A ^  # ぴゃ
  (M E P) >> T H U ^  # てゅ
  (M E K) >> T H I ^  # てぃ
  (J E P) >> D H U ^  # でゅ
  (J E K) >> D H I ^  # でぃ
  (M D L) >> T W U ^  # とぅ
  (J D L) >> D W U ^  # どぅ
  (M R O) >> S Y E ^  # しぇ
  (M G O) >> T Y E ^  # ちぇ
  (J R O) >> J E ^    # じぇ
  (J G O) >> D Y E ^  # ぢぇ
  (V Semicolon O) >> F E ^    # ふぇ
  (V Semicolon P) >> F Y U ^  # ふゅ
  (V Semicolon J) >> F A ^    # ふぁ
  (V Semicolon K) >> F I ^    # ふぃ
  (V Semicolon N) >> F O ^    # ふぉ
  (M Q O) >> V E ^    # ヴぇ
  (M Q P) >> V Y U ^  # ヴゅ
  (M Q J) >> V A ^    # ヴぁ
  (M Q K) >> V I ^    # ヴぃ
  (M Q N) >> V O ^    # ヴぉ
  (V L O) >> W E ^    # うぇ
  (V L K) >> W I ^    # うぃ
  (V L N) >> W H O ^  # うぉ
  (V K O) >> Y E ^    # いぇ
  (V L J) >> T S A ^  # つぁ
  (V H O) >> Q E ^    # くぇ
  (V H J) >> Q A ^    # くぁ
  (V H K) >> Q I ^    # くぃ
  (V H N) >> Q O ^    # くぉ
  (V H Period) >> K U X W A ^ # くゎ
  (F H O) >> G W E ^  # ぐぇ
  (F H J) >> G W A ^  # ぐぁ
  (F H K) >> G W I ^  # ぐぃ
  (F H N) >> G W O ^  # ぐぉ
  (F H Period) >> G U X W A ^ # ぐゎ

# 編集モード
  (D F Y) >> Home ^ # {Home}
  (D F H) >> ime_complete End ^ # {Enter}{End}
  (D F N) >> End ^ # {End}
  (D F U) >> Shift{End} Backspace ^ # +{End}{BS}
  (D F J) >> prev_char # {↑}
  (D F M) >> next_char # {↓}
  (D F I)     >> Meta{Slash} ^ # {vk1Csc079}
  (D F K)     >> Shift{prev_char} # +{↑}
  (D F Comma) >> Shift{next_char} # +{↓}
  (D F O)      >> Delete # {Del}
  (D F L)      >> Shift{repeat[prev_char, 7]} # +{↑ 7}
  (D F Period) >> Shift{repeat[next_char, 7]} # +{↓ 7}
  (D F P)         >> ime_cancel ^ # {Esc 3}
  (D F Semicolon) >> Control{I} ^ # ^i
  (D F Slash)     >> Control{U} ^ # ^u
  (J K Q) >> ime_complete Control{End} # ^{End}
  (J K A) >> "……" ime_complete ^ # ……{改行}
  (J K Z) >> "――" ime_complete ^ # ――{改行}
  (J K W) >> "『』" ime_complete prev_char ^ # 『』{改行}{↑}
  (J K S) >> "()" ime_complete prev_char ^ # (){改行}{↑}
  (J K X) >> "【】" ime_complete prev_char ^ # 【】{改行}{↑}
  (J K D) >> Shift{Slash} ime_complete ^ # ？{改行}
  (J K C) >> Shift{1} ime_complete ^ # ！{改行}
  (J K R) >> Control{S} ^ # ^s
  (J K F) >> "[]" ime_complete prev_char ^ # 「」{改行}{↑}
  (J K V) >> ime_complete next_char ^ # {改行}{↓}
  (J K T) >> Slash ^ # ・
  (J K G) >> "《》" ime_complete prev_char ^ # 《》{改行}{↑}
  (J K B) >> ime_complete next_row ^ # {改行}{←}
  (C V Y) >> Shift{Home} ^ # +{Home}
  (C V H) >> Control{C} ^ # ^c
  (C V N) >> Shift{End} ^ # +{End}
  (C V U) >> Control{X} ^ # ^x
  (C V J) >> prev_row # {→}
  (C V M) >> next_row # {←}
  (C V I)     >> Control{V} ^ # ^v
  (C V K)     >> Shift{prev_row} # +{→}
  (C V Comma) >> Shift{next_row} # +{←}
  (C V O)      >> Control{Y} ^ # ^y
  (C V L)      >> Shift{repeat[prev_row, 5]} # +{→ 5}
  (C V Period) >> Shift{repeat[next_row, 5]} # +{← 5}
  (C V P)         >> Control{Z} ^ # ^z
  (C V Semicolon) >> Shift{repeat[prev_row, 20]} # +{→ 20}
  (C V Slash)     >> Shift{repeat[next_row, 20]} # +{← 20}
  (M Comma Q) >> Home prev_row End repeat[Delete, 4] next_row ^ # {Home}{→}{End}{Del 4}{←}
  (M Comma A) >> Home prev_row End repeat[Delete, 2] next_row ^ # {Home}{→}{End}{Del 2}{←}
  (M Comma Z) >> "　　　×　　　×　　　×" ime_complete Enter ^ # 　　　×　　　×　　　×{改行 2}
  (M Comma W) >> Control{X} "『』" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x『^v』{改行}{Space}+{↑}^x
  (M Comma S) >> Control{X} "()" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x(^v){改行}{Space}+{↑}^x
  (M Comma X) >> Control{X} "【】" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x【^v】{改行}{Space}+{↑}^x
  (M Comma E) >> Home Enter{24ms} "　　　" ime_complete next_row ^ # {Home}{改行}{Space 3}{←}
  (M Comma D) >> Home Enter{24ms} "　" ime_complete next_row ^ # {Home}{改行}{Space 1}{←}
  (M Comma C) >> "／" ime_complete ^ # ／{改行}
  (M Comma R) >> "　　　" ime_complete ^ # {Space 3}
  (M Comma F) >> Control{X} "[]" ime_complete prev_char Control{V{72ms}} next_char Space Shift{prev_char} Control{X} ^ # ^x「^v」{改行}{Space}+{↑}^x
  (M Comma V) >> ime_complete End Enter{24ms} "[]" ime_complete prev_char ^ # {改行}{End}{改行}「」{改行}{↑}
  (M Comma T) >> "〇" ime_complete ^ # 〇{改行}
  (M Comma G) >> Control{X} "｜" ime_complete Control{V{72ms}} Space Shift{prev_char} Control{X{40ms}} "《》" ime_complete prev_char ^ # ^x｜{改行}^v《》{改行}{↑}{Space}+{↑}^x
  (M Comma B) >> ime_complete End Enter{24ms} "　" ime_complete ^ # {改行}{End}{改行}{Space}

# 固有名詞ショートカット
  # (U I Q) >> "" ^
  # (U I A) >> "三神" ^
  # (U I Z) >> "火よ、在れ" ^
  # (U I W) >> "臨兵闘者皆陣烈在前" ^
  # (U I S) >> "峯" ^
  # (U I X) >> "火の剣" ^
  # (U I E) >> "天狗" ^
  # (U I D) >> "小鴉" ^
  # (U I C) >> "罵詈雑" ^
  # (U I R) >> "シンイチ" ^
  # (U I F) >> "光太郎" ^
  # (U I V) >> "心の闇" ^
  # (U I T) >> "ネムカケ" ^
  # (U I G) >> "" ^
  # (U I B) >> "" ^
  # (E R Y) >> "才一" ^
  # (E R H) >> "鞍馬" ^
  # (E R N) >> "鬼塚" ^
  # (E R U) >> "さくら" ^
  # (E R J) >> "青鬼" ^
  # (E R M) >> "赤石" ^
  # (E R I) >> "酒田" ^
  # (E R K) >> "百地" ^
  # (E R Comma) >> "八幡" ^
  # (E R O) >> "" ^
  # (E R L) >> "" ^
  # (E R Period) >> "" ^
  # (E R P) >> "" ^
  # (E R Semicolon) >> "不動金縛りの術" ^
  # (E R Slash) >> "霊槍" ^

# ********** 2キー同時 **********
# 濁音
  (F U) >> Z A ^  # ざ
  (F O) >> Z U ^  # ず
  (F P) >> B E ^  # べ
  (F H) >> G U ^  # ぐ
  (F L) >> D U ^  # づ
  (F Semicolon) >> B U ^  # ぶ
  (F N) >> D A ^  # だ
  (J W) >> G I ^  # ぎ
  (J E) >> D E ^  # で
  (J R) >> Z I ^  # じ
  (J A) >> Z E ^  # ぜ
  (J S) >> G E ^  # げ
  (J D) >> D O ^  # ど
  (J F) >> G A ^  # が
  (J G) >> D I ^  # ぢ
  (J Z) >> B O ^  # ぼ
  (J X) >> B I ^  # び
  (J C) >> B A ^  # ば
  (J V) >> G O ^  # ご
  (J B) >> Z O ^  # ぞ

# 半濁音
  (V P) >> P E ^  # ぺ
  (V Semicolon) >> P U ^  # ぷ
  (M Z) >> P O ^  # ぽ
  (M X) >> P I ^  # ぴ
  (M C) >> P A ^  # ぱ

# 小書き
  (Q I) >> X Y O ^  # ょ
  (Q O) >> X E ^    # ぇ
  (Q P) >> X Y U ^  # ゅ
  (Q H) >> X Y A ^  # ゃ
  (Q J) >> X A ^    # ぁ
  (Q K) >> X I ^    # ぃ
  (Q L) >> X U ^    # ぅ
  (Q N) >> X O ^    # ぉ
  (Q Period) >> X W A ^ # ゎ

# 拗音、外来音
  (H W) >> K Y A ^  # きゃ
  (H E) >> R Y A ^  # りゃ
  (H R) >> S Y A ^  # しゃ
  (H D) >> N Y A ^  # にゃ
  (H G) >> T Y A ^  # ちゃ
  (H X) >> H Y A ^  # ひゃ
  (H B) >> M Y A ^  # みゃ
  (P W) >> K Y U ^  # きゅ
  (P E) >> R Y U ^  # りゅ
  (P R) >> S Y U ^  # しゅ
  (P D) >> N Y U ^  # にゅ
  (P G) >> T Y U ^  # ちゅ
  (P X) >> H Y U ^  # ひゅ
  (P B) >> M Y U ^  # みゅ
  (I W) >> K Y O ^  # きょ
  (I E) >> R Y O ^  # りょ
  (I R) >> S Y O ^  # しょ
  (I D) >> N Y O ^  # にょ
  (I G) >> T Y O ^  # ちょ
  (I X) >> H Y O ^  # ひょ
  (I B) >> M Y O ^  # みょ

# 機能部分
  (H J) >> ime_on ^
  (F G) >> ime_off ^
  (V M) >> Enter ^

# ********** 単打 **********
  Q >>  V U ^ # ヴ
  W >>  K I ^ # き
  E >>  T E ^ # て
  R >>  S I ^ # し
  T >>  next_row  # {←}
  Y >>  prev_row  # {→}
  U >>  Backspace
  I >>  R U ^ # る
  O >>  S U ^ # す
  P >>  H E ^ # へ
  A >>  R O ^ # ろ
  S >>  K E ^ # け
  D >>  T O ^ # と
  F >>  K A ^ # か
  G >>  X T U ^ # っ
  H >>  K U ^ # く
  J >>  A ^ # あ
  K >>  I ^ # い
  L >>  U ^ # う
  Semicolon >> Minus ^  # ー
  Z >>  H O ^ # ほ
  X >>  H I ^ # ひ
  C >>  H A ^ # は
  V >>  K O ^ # こ
  B >>  S O ^ # そ
  N >>  T A ^ # た
  M >>  N A ^ # な
  Comma >>  N N ^ # ん
  Period >> R A ^ # ら
  Slash >>  R E ^ # れ

[default] # [stage] としても良い
